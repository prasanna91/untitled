---
alwaysApply: true
---
Codemagic Workflow Rules
1. Configuration Variable Management
No hardcoding

You must never hardcode build/configuration variables (e.g., APP_NAME, VERSION_NAME, LOGO_URL, API keys, etc.) in any Dart code, scripts, or native files.

Injection at build time only

All dynamic values must be provided at build time via:

Environment variables ($ENV_VAR)

--dart-define parameters

A generated Dart configuration file (e.g., lib/config/env.g.dart) created by a preâ€‘build script.

Approved sources for dynamic values

Values can only originate from:

Codemagic environment variables

Secrets in Codemagic

Config files generated by scripts during the CI/CD workflow

2. Modification of Native Project Files
No direct manual edits to the android/ or ios/ folders in the repository.

Automation required

Modifications to native files must be done using shell scripts as part of the Codemagic workflow.

iOS-specific rules

Changes to:

Info.plist

.entitlements files

Xcode project or scheme files
must be automated in scripts (e.g., lib/scripts/ios-workflow/pre-build.sh).

Android-specific rules

Changes to:

build.gradle or gradle.properties

AndroidManifest.xml

Signing configurations
must be automated in scripts within the workflow.

3. Implementation Requirements
Script properties

All scripts modifying native files must be idempotent (safe to run multiple times without causing duplicate changes).

Scripts must clearly log changes being made.

Dynamic configuration in Dart

Dart code should only read workflow-controlled values from:

Environment variables (const value = String.fromEnvironment('KEY'))

Generated configuration files (checked into .gitignore if they have secrets)

Validation and Enforcement

CI must fail the build if:

Any hardcoded values from the build configuration are detected in Dart or scripts.

Any unapproved direct edits to android/ or ios/ project files are found.

4. Summary
âœ… Allowed:

Injecting configuration via env vars, --dart-define, generated Dart files.

Modifying native project files only via scripts in the build workflow.

ðŸš« Not Allowed:

Hardcoding workflow-provided variables.

Manual edits in android/ or ios/ directories.

// Variable validation is not required in scripts or Dart code, as validation is handled on the frontend.
// Scripts and Dart code should proceed regardless of whether a variable is set or empty.
// If a variable is missing or empty, the workflow must continue without throwing an error or halting the build.
